<span class="like">
<% @like = micropost.likes.find_by(user_id: current_user.id) %>
<% if @like %>
  <%= form_for(@like, method: :delete, remote: true) do |f| %>
    <%= button_tag(class: "btn btn-default btn-xs") do %>
      <i class="fa fa-heart" aria-hidden="true"><%= micropost.likes.count %> いいね済み</i>
    <% end %>
  <% end %>
<% else %>
  <%= form_for(micropost.likes.build, remote: true) do |f| %>
    <div><%= hidden_field_tag :micropost_id, micropost.id %></div> 
    <%= button_tag(class: "btn btn-default btn-xs") do %>
      <i class="fa fa-heart-o" aria-hidden="true"><%= micropost.likes.count %> いいねする</i> 
    <% end %>
  <% end %>
<% end %>
</span>
